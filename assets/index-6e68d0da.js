import{R as V,u as $e,r as m,a as T,j as r,b as Ue,c as qe,d as We,e as He,s as Je}from"./index-dd8e3692.js";function Ee(e=V){const t=e===V?$e:()=>m.useContext(e);return function(){const{store:o}=t();return o}}const Ke=Ee();function Xe(e=V){const t=e===V?Ke:Ee(e);return function(){return t().dispatch}}const Ye=Xe();var Se=Symbol.for("immer-nothing"),we=Symbol.for("immer-draftable"),I=Symbol.for("immer-state");function S(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var U=Object.getPrototypeOf;function q(e){return!!e&&!!e[I]}function P(e){var t;return e?ze(e)||Array.isArray(e)||!!e[we]||!!((t=e.constructor)!=null&&t[we])||oe(e)||re(e):!1}var Qe=Object.prototype.constructor.toString();function ze(e){if(!e||typeof e!="object")return!1;const t=U(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Qe}function K(e,t){ne(e)===0?Object.entries(e).forEach(([n,o])=>{t(n,o,e)}):e.forEach((n,o)=>t(o,n,e))}function ne(e){const t=e[I];return t?t.type_:Array.isArray(e)?1:oe(e)?2:re(e)?3:0}function me(e,t){return ne(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function De(e,t,n){const o=ne(e);o===2?e.set(t,n):o===3?e.add(n):e[t]=n}function Ze(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function oe(e){return e instanceof Map}function re(e){return e instanceof Set}function L(e){return e.copy_||e.base_}function fe(e,t){if(oe(e))return new Map(e);if(re(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ze(e))return U(e)?{...e}:Object.assign(Object.create(null),e);const n=Object.getOwnPropertyDescriptors(e);delete n[I];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){const i=o[a],s=n[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(U(e),n)}function X(e,t=!1){return ae(e)||q(e)||!P(e)||(ne(e)>1&&(e.set=e.add=e.clear=e.delete=Ve),Object.freeze(e),t&&K(e,(n,o)=>X(o,!0))),e}function Ve(){S(2)}function ae(e){return Object.isFrozen(e)}var et={};function F(e){const t=et[e];return t||S(0,e),t}var Y;function Te(){return Y}function tt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ce(e,t){t&&(F("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ke(e){he(e),e.drafts_.forEach(nt),e.drafts_=null}function he(e){e===Y&&(Y=e.parent_)}function je(e){return Y=tt(Y,e)}function nt(e){const t=e[I];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Be(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[I].modified_&&(ke(t),S(4)),P(e)&&(e=ee(t,e),t.parent_||te(t,e)),t.patches_&&F("Patches").generateReplacementPatches_(n[I].base_,e,t.patches_,t.inversePatches_)):e=ee(t,n,[]),ke(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Se?e:void 0}function ee(e,t,n){if(ae(t))return t;const o=t[I];if(!o)return K(t,(a,i)=>pe(e,o,t,a,i,n)),t;if(o.scope_!==e)return t;if(!o.modified_)return te(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const a=o.copy_;let i=a,s=!1;o.type_===3&&(i=new Set(a),a.clear(),s=!0),K(i,(k,c)=>pe(e,o,a,k,c,n,s)),te(e,a,!1),n&&e.patches_&&F("Patches").generatePatches_(o,n,e.patches_,e.inversePatches_)}return o.copy_}function pe(e,t,n,o,a,i,s){if(q(a)){const k=i&&t&&t.type_!==3&&!me(t.assigned_,o)?i.concat(o):void 0,c=ee(e,a,k);if(De(n,o,c),q(c))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(P(a)&&!ae(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ee(e,a),(!t||!t.scope_.parent_)&&te(e,a)}}function te(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X(t,n)}function ot(e,t){const n=Array.isArray(e),o={type_:n?1:0,scope_:t?t.scope_:Te(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=o,i=ye;n&&(a=[o],i=Q);const{revoke:s,proxy:k}=Proxy.revocable(a,i);return o.draft_=k,o.revoke_=s,k}var ye={get(e,t){if(t===I)return e;const n=L(e);if(!me(n,t))return rt(e,n,t);const o=n[t];return e.finalized_||!P(o)?o:o===ce(e.base_,t)?(le(e),e.copy_[t]=xe(o,e)):o},has(e,t){return t in L(e)},ownKeys(e){return Reflect.ownKeys(L(e))},set(e,t,n){const o=Oe(L(e),t);if(o!=null&&o.set)return o.set.call(e.draft_,n),!0;if(!e.modified_){const a=ce(L(e),t),i=a==null?void 0:a[I];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Ze(n,a)&&(n!==void 0||me(e.base_,t)))return!0;le(e),_e(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ce(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,le(e),_e(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=L(e),o=Reflect.getOwnPropertyDescriptor(n,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:n[t]}},defineProperty(){S(11)},getPrototypeOf(e){return U(e.base_)},setPrototypeOf(){S(12)}},Q={};K(ye,(e,t)=>{Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Q.deleteProperty=function(e,t){return Q.set.call(this,e,t,void 0)};Q.set=function(e,t,n){return ye.set.call(this,e[0],t,n,e[0])};function ce(e,t){const n=e[I];return(n?L(n):e)[t]}function rt(e,t,n){var a;const o=Oe(t,n);return o?"value"in o?o.value:(a=o.get)==null?void 0:a.call(e.draft_):void 0}function Oe(e,t){if(!(t in e))return;let n=U(e);for(;n;){const o=Object.getOwnPropertyDescriptor(n,t);if(o)return o;n=U(n)}}function _e(e){e.modified_||(e.modified_=!0,e.parent_&&_e(e.parent_))}function le(e){e.copy_||(e.copy_=fe(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var at=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,o)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(c=i,...B){return s.produce(c,g=>n.call(this,g,...B))}}typeof n!="function"&&S(6),o!==void 0&&typeof o!="function"&&S(7);let a;if(P(t)){const i=je(this),s=xe(t,void 0);let k=!0;try{a=n(s),k=!1}finally{k?ke(i):he(i)}return Ce(i,o),Be(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===Se&&(a=void 0),this.autoFreeze_&&X(a,!0),o){const i=[],s=[];F("Patches").generateReplacementPatches_(t,a,i,s),o(i,s)}return a}else S(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...k)=>this.produceWithPatches(s,c=>t(c,...k));let o,a;return[this.produce(t,n,(s,k)=>{o=s,a=k}),o,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){P(e)||S(8),q(e)&&(e=it(e));const t=je(this),n=xe(e,void 0);return n[I].isManual_=!0,he(t),n}finishDraft(e,t){const n=e&&e[I];(!n||!n.isManual_)&&S(9);const{scope_:o}=n;return Ce(o,t),Be(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const o=F("Patches").applyPatches_;return q(e)?o(e,t):this.produce(e,a=>o(a,t))}};function xe(e,t){const n=oe(e)?F("MapSet").proxyMap_(e,t):re(e)?F("MapSet").proxySet_(e,t):ot(e,t);return(t?t.scope_:Te()).drafts_.push(n),n}function it(e){return q(e)||S(10,e),Ae(e)}function Ae(e){if(!P(e)||ae(e))return e;const t=e[I];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=fe(e,t.scope_.immer_.useStrictShallowCopy_)}else n=fe(e,!0);return K(n,(o,a)=>{De(n,o,Ae(a))}),t&&(t.finalized_=!1),n}var M=new at,st=M.produce;M.produceWithPatches.bind(M);M.setAutoFreeze.bind(M);M.setUseStrictShallowCopy.bind(M);M.applyPatches.bind(M);M.createDraft.bind(M);M.finishDraft.bind(M);function N(e){var t=m.useState(function(){return X(typeof e=="function"?e():e,!0)}),n=t[1];return[t[0],m.useCallback(function(o){n(typeof o=="function"?st(o):X(o))},[])]}var Re={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ie=T.createContext&&T.createContext(Re),O=globalThis&&globalThis.__assign||function(){return O=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},O.apply(this,arguments)},ct=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};function Le(e){return e&&e.map(function(t,n){return T.createElement(t.tag,O({key:n},t.attr),Le(t.child))})}function A(e){return function(t){return T.createElement(lt,O({attr:O({},e.attr)},t),Le(e.child))}}function lt(e){var t=function(n){var o=e.attr,a=e.size,i=e.title,s=ct(e,["attr","size","title"]),k=a||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),T.createElement("svg",O({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,s,{className:c,style:O(O({color:e.color||n.color},n.style),e.style),height:k,width:k,xmlns:"http://www.w3.org/2000/svg"}),i&&T.createElement("title",null,i),e.children)};return Ie!==void 0?T.createElement(Ie.Consumer,null,function(n){return t(n)}):t(Re)}function Pe(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function ut(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}function dt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}}]})(e)}function mt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function ft(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function kt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function ht(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}const _t="_container_1vn2m_1",H={container:_t,"header-bar":"_header-bar_1vn2m_10","center-box":"_center-box_1vn2m_23"},xt="_button_fu0k7_1",Fe={button:xt,"button-group":"_button-group_fu0k7_75"},D=e=>{const{size:t="default",type:n="default",onClick:o}=e;return r.jsx("div",{className:[Fe.button,"theme-transition"].join(" "),"data-button":"true","data-size":t,"data-type":n,"data-icon":e.icon,onClick:o,children:e.children})},ge=e=>r.jsx("div",{className:Fe["button-group"],children:e.children}),yt="_clock_1v4k7_1",gt="_time_1v4k7_12",bt="_date_1v4k7_13",ue={clock:yt,time:gt,date:bt},vt=["周日","周一","周二","周三","周四","周五","周六"],wt=()=>{const e=m.useRef(),[t,n]=N({hours:"16",minutes:"01",month:"4",date:"29",week:6,showColon:!0});return m.useEffect(()=>{const o=()=>{const a=new Date,i=a.getHours(),s=a.getMinutes(),k=a.getMonth()+1,c=a.getDate(),B=a.getDay();n(g=>{g.hours=i<10?`0${i}`:`${i}`,g.minutes=s<10?`0${s}`:`${s}`,g.month=`${k}`,g.date=`${c}`,g.week=B,g.showColon=!g.showColon})};return o(),e.current=setInterval(o,1e3),()=>{clearInterval(e.current)}},[n]),r.jsxs("div",{className:[ue.clock,"theme-transition"].join(" "),children:[r.jsxs("div",{className:ue.time,children:[r.jsx("div",{"data-type":"hours",children:t.hours}),r.jsx("div",{"data-type":"colon",children:t.showColon?":":""}),r.jsx("div",{"data-type":"minutes",children:t.minutes})]}),r.jsxs("div",{className:ue.date,children:[r.jsx("div",{"data-type":"month",children:`${t.month}月${t.date}日`}),r.jsx("div",{"data-type":"week",children:vt[t.week]})]})]})},Ct={"search-bar":"_search-bar_1fnug_1"},jt=()=>{const e=m.useRef(null);return m.useEffect(()=>{e.current instanceof HTMLInputElement&&e.current.focus()},[]),r.jsx("div",{className:Ct["search-bar"],children:r.jsx("input",{ref:e,type:"text",className:"theme-transition",onFocus:t=>t.target.select(),onKeyDown:t=>{if(t.key==="Enter"){const o=`https://www.google.com/search?q=${t.target.value.trim()}&ie=UTF-8`;window.open(o,"_self")}}})})},Bt="_item_tdq6g_78",p={"bookmark-drawer":"_bookmark-drawer_tdq6g_1","drawer-content":"_drawer-content_tdq6g_46","drawer-content-box":"_drawer-content-box_tdq6g_53","drawer-content-box-header":"_drawer-content-box-header_tdq6g_57","drawer-content-box-title":"_drawer-content-box-title_tdq6g_67","drawer-content-box-addbutton":"_drawer-content-box-addbutton_tdq6g_72","drawer-content-box-list":"_drawer-content-box-list_tdq6g_75",item:Bt,"item-icon":"_item-icon_tdq6g_101","item-title":"_item-title_tdq6g_111","item-arrow":"_item-arrow_tdq6g_114","content-divider":"_content-divider_tdq6g_123","drawer-footer":"_drawer-footer_tdq6g_129"},be={"context-menu":"_context-menu_38x9x_1","menu-item":"_menu-item_38x9x_44","menu-item-divider":"_menu-item-divider_38x9x_65"};function pt(e){return A({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"}}]})(e)}const It="_modal_tvfuf_1",E={"modal-mask":"_modal-mask_tvfuf_1",modal:It,"modal-header":"_modal-header_tvfuf_53","modal-title":"_modal-title_tvfuf_63","modal-close":"_modal-close_tvfuf_68","modal-content":"_modal-content_tvfuf_85","modal-footer":"_modal-footer_tvfuf_92","confirm-content":"_confirm-content_tvfuf_101","confirm-icon":"_confirm-icon_tvfuf_111","confirm-message":"_confirm-message_tvfuf_119","confirm-buttons":"_confirm-buttons_tvfuf_126"},J={default:[420,600],large:[950,600],small:[400,320]},Mt=m.memo(e=>{const[t,n]=N({render:!1,show:!1}),o=m.useRef(null),a=m.useRef({width:0,height:0,top:0,left:0}),i=m.useRef(!1),s=()=>{e.onOk&&e.onOk(),e.okButtonClose!==!1&&e.onClose&&e.onClose()},k=()=>{e.onCancel&&e.onCancel(),e.cancelButtonClose!==!1&&e.onClose&&e.onClose()};return m.useLayoutEffect(()=>{i.current||(e.open&&!t.render&&!t.show&&n(c=>{c.render=!0}),e.open&&t.render&&!t.show&&requestAnimationFrame(()=>{n(c=>{c.show=!0})}),!e.open&&t.render&&t.show&&(n(c=>{c.show=!1}),setTimeout(()=>{n(c=>{c.render=!1,e.onClosed&&e.onClosed()})},300)))},[e.open,e.onClosed,t.render,t.show]),m.useEffect(()=>{let c;function B(){a.current.width=J.default[0],a.current.height=J.default[1],Array.isArray(e.size)&&e.size.length===2&&typeof e.size[0]=="number"&&typeof e.size[1]=="number"?(a.current.width=e.size[0],a.current.height=e.size[1]):e.size&&!Array.isArray(e.size)&&J[e.size]&&(a.current.width=J[e.size][0],a.current.height=J[e.size][1])}function g(){const{width:_,height:v}=a.current;a.current.top=window.innerHeight*.5-v*.5,a.current.left=window.innerWidth*.5-_*.5}function x(){if(o.current){const{width:_,height:v,top:z,left:f}=a.current;o.current.style.width=`${_}px`,o.current.style.height=`${v}px`,o.current.style.top=`${z}px`,o.current.style.left=`${f}px`}}function w(){clearTimeout(c),c=setTimeout(()=>{g(),x()},300)}return B(),g(),x(),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}},[e.size,t.render]),m.useEffect(()=>{e.onReady&&e.onReady({doClose(){i.current=!0,n(c=>{c.show=!1}),setTimeout(()=>{n(c=>{c.render=!1}),e.onClosed&&e.onClosed(),i.current=!1},300)}})},[]),t.render?Ue.createPortal(r.jsxs(r.Fragment,{children:[e.mask!==!1?r.jsx("div",{"data-show":t.show,className:E["modal-mask"]}):null,r.jsxs("div",{ref:o,className:E.modal,"data-show":t.show,children:[e.renderHeader!==!1?r.jsxs("div",{className:E["modal-header"],children:[r.jsx("div",{className:[E["modal-title"],"theme-transition"].join(" "),children:e.title}),r.jsx("div",{className:[E["modal-close"],"theme-transition"].join(" "),onClick:e.onClose,children:r.jsx(ht,{})})]}):null,r.jsx("div",{className:E["modal-content"],children:e.children}),(e.customButtons&&e.customButtons.length>0||e.okButton!==!1||e.cancelButton!==!1)&&e.renderFooter!==!1?r.jsx("div",{className:E["modal-footer"],children:r.jsxs(ge,{children:[e.customButtons,e.okButton!==!1?r.jsx(D,{type:"primary",onClick:s,children:e.okButtonText||"确 定"}):null,e.cancelButton!==!1?r.jsx(D,{onClick:k,children:e.cancelButtonText||"取 消"}):null]})}):null]})]}),document.body):null}),Z=e=>{let t=()=>{};return{open:(a,i)=>{const s=document.body.appendChild(document.createElement("div")),k=qe(s);k.render(r.jsx(T.StrictMode,{children:r.jsx(e,{Modal:Mt,modalProps:{...i,open:!0,onReady(c){t=c.doClose},onClose(){t()},onClosed(){k.unmount(),document.body.removeChild(s)}},contentProps:a||{}})}))},close:()=>{t()}}},Nt=Z(({Modal:e,modalProps:t,contentProps:n})=>r.jsx(e,{...t,renderHeader:!1,renderFooter:!1,title:n.title,size:[260,220],children:r.jsxs("div",{className:E["confirm-content"],children:[r.jsx("div",{className:E["confirm-icon"],children:r.jsx(pt,{})}),r.jsx("div",{className:E["confirm-message"],children:n.message}),r.jsxs("div",{className:E["confirm-buttons"],children:[r.jsx(D,{type:"primary",onClick:()=>{t.onClose&&t.onClose(),n.onOk&&n.onOk()},children:"确 定"}),r.jsx(D,{onClick:()=>{t.onClose&&t.onClose(),n.onCancel&&n.onCancel()},children:"取 消"})]})]})})),Gt=()=>{const[e,t]=N({open:!1,top:0,left:0}),n=m.useRef(null);return{ref:n,open:(i,s)=>{t(k=>{k.open=!0,k.top=i,k.left=s,requestAnimationFrame(()=>{if(n.current){const{innerWidth:c,innerHeight:B}=window,{width:g,height:x}=n.current.getBoundingClientRect();t(w=>{let _=w.top,v=w.left;_=_<0?0:_,_=_+x>B?B-x:_,v=v<0?0:v,v=v+g>c?c-g:v,w.top=_,w.left=v})}})})},onClose:()=>{t(i=>{i.open=!1})},state:e}},$=e=>r.jsx("div",{className:be["menu-item"],"data-danger":e.danger,onClick:()=>{e.confirm?Nt.open({title:e.confirmTitle,message:e.confirmMessage,onOk(){e.onClick&&e.onClick()}}):e.onClick&&e.onClick()},children:e.children}),Me=()=>r.jsx("div",{className:be["menu-item-divider"]}),Et=m.memo(m.forwardRef((e,t)=>{const[n,o]=N({render:!1,show:!1}),a=m.useRef(!1);return m.useLayoutEffect(()=>{e.open&&!n.render&&!n.show&&(o(i=>{i.render=!0}),requestAnimationFrame(()=>{o(i=>{i.show=!0})})),!e.open&&n.render&&n.show&&(o(i=>{i.show=!1,i.render=!1}),e.onClosed&&e.onClosed())},[e.open,n.render,n.show]),m.useEffect(()=>{const i=()=>{e.onClose&&e.onClose()};return window.addEventListener("click",i),()=>{window.removeEventListener("click",i)}},[]),n.render?We.createPortal(r.jsx("div",{ref:t,className:be["context-menu"],"data-show":n.show,style:{top:`${e.top}px`,left:`${e.left}px`},onClick:i=>{a.current||(a.current=!0,i.stopPropagation(),i.preventDefault(),setTimeout(()=>{a.current=!1,e.onClose&&e.onClose()},100))},onContextMenu:i=>{i.stopPropagation(),i.preventDefault()},children:e.children}),document.body):null})),Ne=e=>r.jsxs("div",{className:p["drawer-content-box"],children:[r.jsxs("div",{className:p["drawer-content-box-header"],children:[r.jsx("div",{className:[p["drawer-content-box-title"],"theme-transition"].join(" "),children:e.title}),r.jsx("div",{className:p["drawer-content-box-addbutton"],children:r.jsx(D,{onClick:e.onAdd,children:r.jsx(ft,{})})})]}),r.jsx("div",{className:p["drawer-content-box-list"],children:e.children})]}),Ge=e=>{const[t,n]=N({iconError:!1});return r.jsxs("div",{className:[p.item].join(" "),"data-active":e.active,onClick:e.onClick,onContextMenu:e.onContextMenu,children:[r.jsx("div",{className:p["item-icon"],children:typeof e.icon=="string"?t.iconError?r.jsx(Pe,{}):r.jsx("img",{src:e.icon,onError:()=>n(o=>{o.iconError=!0})}):e.icon}),r.jsx("div",{className:p["item-title"],children:e.title}),e.arrow?r.jsx("div",{className:p["item-arrow"],children:r.jsx(ut,{})}):null]})},St=m.memo(e=>{var g;const{onAddBookmarkGroup:t,onAddBookmarkItem:n}=e,[o,a]=N({bookmarkGroupActiveId:e.bookmarkGroupList[0]?e.bookmarkGroupList[0].id:"",contextMenuTargetType:""}),i=Gt(),s=m.useRef({contextMenuTargetId:"",contextMenuTargetType:""}),k=x=>{e.bookmarkGroupList.forEach(w=>{w.id===o.bookmarkGroupActiveId&&w.bookmarks.forEach(_=>{_.id===s.current.contextMenuTargetId&&window.open(_.url,x)})})},c=x=>{switch(x){case"open":k("_self");break;case"openNewPage":k("_blank");break;case"edit":s.current.contextMenuTargetType==="group"?e.onEditBookmarkGroup(s.current.contextMenuTargetId):e.onEditBookmarkItem(o.bookmarkGroupActiveId,s.current.contextMenuTargetId);break;case"moveUp":s.current.contextMenuTargetType==="group"?e.onMoveUpBookmarkGroup(s.current.contextMenuTargetId):e.onMoveUpBookmarkItem(o.bookmarkGroupActiveId,s.current.contextMenuTargetId);break;case"moveDown":s.current.contextMenuTargetType==="group"?e.onMoveDownBookmarkGroup(s.current.contextMenuTargetId):e.onMoveDownBookmarkItem(o.bookmarkGroupActiveId,s.current.contextMenuTargetId);break;case"delete":s.current.contextMenuTargetType==="group"?e.onDeleteBookmarkGroup(s.current.contextMenuTargetId):e.onDeleteBookmarkItem(o.bookmarkGroupActiveId,s.current.contextMenuTargetId);break}},B=((g=e.bookmarkGroupList.filter(({id:x})=>x===o.bookmarkGroupActiveId)[0])==null?void 0:g.bookmarks)||[];return m.useEffect(()=>{e.bookmarkGroupList.length>0&&!o.bookmarkGroupActiveId&&a(x=>{x.bookmarkGroupActiveId=e.bookmarkGroupList[0].id})},[e.bookmarkGroupList]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:[p["bookmark-drawer"],"theme-transition"].join(" "),"data-open":e.open,children:[r.jsxs("div",{className:p["drawer-content"],children:[r.jsx(Ne,{title:"书签分类",onAdd:t,children:e.bookmarkGroupList.map(({id:x,name:w})=>r.jsx(Ge,{icon:r.jsx(dt,{}),title:w,arrow:!0,active:x===o.bookmarkGroupActiveId,onClick:()=>{a(_=>{_.bookmarkGroupActiveId=x})},onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),s.current.contextMenuTargetId=x,s.current.contextMenuTargetType="group",i.open(_.clientY,_.clientX),a(v=>{v.contextMenuTargetType="group"})}},x))}),r.jsx("div",{className:[p["content-divider"],"theme-transition"].join(" ")}),r.jsx(Ne,{title:"书签列表",onAdd:()=>n(o.bookmarkGroupActiveId),children:B.map(({id:x,name:w,icon:_,url:v})=>r.jsx(Ge,{icon:_,title:w,onClick:()=>{window.open(v,"_self")},onContextMenu:z=>{z.preventDefault(),z.stopPropagation(),s.current.contextMenuTargetId=x,s.current.contextMenuTargetType="item",i.open(z.clientY,z.clientX),a(f=>{f.contextMenuTargetType="item"})}},x))})]}),r.jsx("div",{className:[p["drawer-footer"],"theme-transition"].join(" "),children:r.jsxs(ge,{children:[r.jsx(D,{onClick:e.onExportBookmark,children:"备份"}),r.jsx(D,{onClick:e.onImportBookmark,children:"导入备份"})]})})]}),r.jsxs(Et,{ref:i.ref,...i.state,onClose:i.onClose,children:[o.contextMenuTargetType==="item"?r.jsxs(r.Fragment,{children:[r.jsx($,{onClick:()=>c("open"),children:"打开"}),r.jsx($,{onClick:()=>c("openNewPage"),children:"新页面打开"}),r.jsx(Me,{})]}):null,r.jsx($,{onClick:()=>c("edit"),children:"编辑"}),r.jsx($,{onClick:()=>c("moveUp"),children:"上移"}),r.jsx($,{onClick:()=>c("moveDown"),children:"下移"}),r.jsx(Me,{}),r.jsx($,{danger:!0,confirm:!0,confirmTitle:"确认删除",confirmMessage:"确实要删除此项？",onClick:()=>c("delete"),children:"删除"})]})]})});let ve=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const de={"form-item":"_form-item_nxy31_1","item-label":"_item-label_nxy31_16","item-content":"_item-content_nxy31_21"},W=e=>r.jsxs("div",{className:de["form-item"],children:[e.label?r.jsx("div",{className:[de["item-label"],"theme-transition"].join(" "),children:e.label}):null,r.jsx("div",{className:de["item-content"],children:e.children})]}),zt=Z(({Modal:e,modalProps:t,contentProps:n})=>{const[o,a]=N({bookmarkGroupName:""});return r.jsx(e,{...t,title:"新增书签分类",size:"small",onOk:()=>{const i={id:ve(),name:o.bookmarkGroupName,bookmarks:[]};n.onOk(i)},children:r.jsx(W,{label:"分类名",children:r.jsx("input",{value:o.bookmarkGroupName,onChange:i=>{a(s=>{s.bookmarkGroupName=i.target.value})}})})})}),Dt=Z(({Modal:e,modalProps:t,contentProps:n})=>{const[o,a]=N({bookmarkName:"",bookmarkUrl:""});return r.jsxs(e,{...t,title:"新增书签",size:"small",onOk:()=>{const i={id:ve(),name:o.bookmarkName,url:o.bookmarkUrl,icon:`${o.bookmarkUrl}/favicon.ico`};n.onOk(i)},children:[r.jsx(W,{label:"书签名称",children:r.jsx("input",{value:o.bookmarkName,onChange:i=>{a(s=>{s.bookmarkName=i.target.value})}})}),r.jsx(W,{label:"书签地址",children:r.jsx("input",{value:o.bookmarkUrl,onChange:i=>{a(s=>{s.bookmarkUrl=i.target.value})}})})]})}),Tt=Z(({Modal:e,modalProps:t,contentProps:n})=>{const[o,a]=N({bookmarkGroupName:n.bookmarkGroupName});return r.jsx(e,{...t,title:"修改书签分类名称",size:"small",onOk:()=>{n.onOk(o.bookmarkGroupName)},children:r.jsx(W,{label:"分类名",children:r.jsx("input",{value:o.bookmarkGroupName,onChange:i=>{a(s=>{s.bookmarkGroupName=i.target.value})}})})})}),Ot=Z(({Modal:e,modalProps:t,contentProps:n})=>{const[o,a]=N({bookmarkName:n.bookmarkItem.name,bookmarkUrl:n.bookmarkItem.url});return r.jsxs(e,{...t,title:"修改书签",size:"small",onOk:()=>{const i={...n.bookmarkItem,name:o.bookmarkName,url:o.bookmarkUrl,icon:`${o.bookmarkUrl}/favicon.ico`};n.onOk(i)},children:[r.jsx(W,{label:"书签名称",children:r.jsx("input",{value:o.bookmarkName,onChange:i=>{a(s=>{s.bookmarkName=i.target.value})}})}),r.jsx(W,{label:"书签地址",children:r.jsx("input",{value:o.bookmarkUrl,onChange:i=>{a(s=>{s.bookmarkUrl=i.target.value})}})})]})}),At=()=>{const[e,t]=N((()=>{let f=[];const u=JSON.parse(localStorage.getItem("bookmarks")||"[]");return Array.isArray(u)&&(f=u),f})()),n=m.useRef(e);n.current=e;const o=()=>{requestAnimationFrame(()=>{localStorage.setItem("bookmarks",JSON.stringify(n.current))})},a=m.useCallback(()=>{const f=document.createElement("input");f.type="file",f.addEventListener("change",()=>{const u=f.files;if(u){const d=new FileReader;d.addEventListener("load",()=>{if(d.result&&typeof d.result=="string"){const l=JSON.parse(d.result);t(l),o()}}),d.readAsText(u[0])}}),f.click()},[]),i=m.useCallback(()=>{const f=JSON.stringify(n.current),u=new Blob([f],{type:"application/json"}),d=URL.createObjectURL(u),l=document.createElement("a"),h=new Date,b=h.getFullYear();let y=h.getMonth()+1,C=h.getDate(),G=h.getHours(),j=h.getMinutes();y=y<10?`0${y}`:y,C=C<10?`0${C}`:C,G=G<10?`0${G}`:G,j=j<10?`0${j}`:j,l.href=d,l.download=`bookmarks_export_${ve(4).toLocaleLowerCase()}_${b}${y}${C}${G}${j}`,l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(d)},[]),s=m.useCallback(()=>{zt.open({onOk(f){t(u=>{u.push(f),o()})}})},[]),k=m.useCallback(f=>{Dt.open({onOk(u){t(d=>{d.forEach(({id:l},h)=>{l===f&&(d[h].bookmarks.push(u),o())})})}})},[]),c=m.useCallback(f=>{const u=n.current.find(({id:d})=>d===f);u&&Tt.open({bookmarkGroupName:u.name,onOk(d){t(l=>{l.forEach(({id:h},b)=>{h===u.id&&(l[b].name=d,o())})})}})},[]),B=m.useCallback((f,u)=>{const d=n.current.find(({id:l})=>l===f);if(d){const l=d.bookmarks.find(({id:h})=>h===u);l&&Ot.open({bookmarkItem:l,onOk(h){t(b=>{b.forEach((y,C)=>{y.id===f&&y.bookmarks.forEach((G,j)=>{G.id===u&&(b[C].bookmarks[j]=h,o())})})})}})}},[]),g=m.useCallback(f=>{t(n.current.filter(({id:u})=>u!==f)),o()},[]),x=m.useCallback((f,u)=>{t(d=>{d.forEach((l,h)=>{l.id===f&&(d[h].bookmarks=d[h].bookmarks.filter(({id:b})=>b!==u),o())})})},[]),w=m.useCallback(f=>{let u=0,d=0;const l=[...n.current];l.forEach(({id:y},C)=>{y===f&&(u=C,d=u-1<0?0:u-1)});const h=l[u],b=l[d];l[u]=b,l[d]=h,t(l),o()},[]),_=m.useCallback((f,u)=>{let d=0,l=0,h=0;const b=[...n.current];b.forEach((j,ie)=>{j.id===f&&(h=ie,j.bookmarks.forEach((se,R)=>{se.id===u&&(d=R,l=l=R-1<0?0:R-1)}))});const y=JSON.parse(JSON.stringify(n.current[h])),C=y.bookmarks[d],G=y.bookmarks[l];y.bookmarks[l]=C,y.bookmarks[d]=G,b[h]=y,t(b),o()},[]),v=m.useCallback(f=>{let u=0,d=0;const l=[...n.current];l.forEach(({id:y},C)=>{y===f&&(u=C,d=u+1>l.length-1?l.length-1:u+1)});const h=l[u],b=l[d];l[u]=b,l[d]=h,t(l),o()},[]),z=m.useCallback((f,u)=>{let d=0,l=0,h=0;const b=[...n.current];b.forEach((j,ie)=>{j.id===f&&(h=ie,j.bookmarks.forEach((se,R)=>{se.id===u&&(d=R,l=R+1>j.bookmarks.length-1?j.bookmarks.length-1:R+1)}))});const y=JSON.parse(JSON.stringify(n.current[h])),C=y.bookmarks[d],G=y.bookmarks[l];y.bookmarks[l]=C,y.bookmarks[d]=G,b[h]=y,t(b),o()},[]);return{bookmarkGroupList:e,handleImportBookmark:a,handleExportBookmark:i,handleAddBookmarkGroup:s,handleAddBookmarkItem:k,handleEditBookmarkGroup:c,handleEditBookmarkItem:B,handleDeleteBookmarkGroup:g,handleDeleteBookmarkItem:x,handleMoveUpBookmarkGroup:w,handleMoveUpBookmarkItem:_,handleMoveDownBookmarkGroup:v,handleMoveDownBookmarkItem:z}},Lt=()=>{const e=He(h=>h.themeMode),t=Ye(),[n,o]=N({themeMode:document.documentElement.dataset.theme||"light",openBookmarkDrawer:!1}),{bookmarkGroupList:a,handleImportBookmark:i,handleExportBookmark:s,handleAddBookmarkGroup:k,handleAddBookmarkItem:c,handleEditBookmarkGroup:B,handleEditBookmarkItem:g,handleDeleteBookmarkGroup:x,handleDeleteBookmarkItem:w,handleMoveUpBookmarkGroup:_,handleMoveUpBookmarkItem:v,handleMoveDownBookmarkGroup:z,handleMoveDownBookmarkItem:f}=At(),u=()=>{t(Je())},d=()=>{o(h=>{h.openBookmarkDrawer=!h.openBookmarkDrawer})},l=m.useCallback(()=>{o(h=>{h.openBookmarkDrawer=!1})},[o]);return r.jsxs("div",{className:H.container,children:[r.jsxs("div",{className:H["header-bar"],children:[r.jsx("div",{className:H["header-bar-left"]}),r.jsx("div",{className:H["header-bar-right"],children:r.jsxs(ge,{children:[r.jsxs(D,{type:n.openBookmarkDrawer?"primary":"default",icon:!0,onClick:d,children:[r.jsx(Pe,{})," 书签"]}),r.jsx(D,{onClick:u,children:e.mode==="dark"?r.jsx(mt,{}):r.jsx(kt,{})})]})})]}),r.jsxs("div",{className:H["center-box"],children:[r.jsx(wt,{}),r.jsx(jt,{})]}),r.jsx(St,{open:n.openBookmarkDrawer,bookmarkGroupList:a,onClose:l,onImportBookmark:i,onExportBookmark:s,onAddBookmarkGroup:k,onAddBookmarkItem:c,onEditBookmarkGroup:B,onEditBookmarkItem:g,onDeleteBookmarkGroup:x,onDeleteBookmarkItem:w,onMoveUpBookmarkGroup:_,onMoveUpBookmarkItem:v,onMoveDownBookmarkGroup:z,onMoveDownBookmarkItem:f})]})};export{Lt as default};
